"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[108],{9108:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about"},[r("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[r("h1",[e._v(e._s(e.id?"编辑":"新建")+"英雄")]),r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"基础信息"}},[r("el-form-item",{attrs:{label:"名称"}},[r("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),r("el-form-item",{staticClass:"upload",attrs:{label:"图标"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.getAuthHeaders(),action:e.uploadURL,"show-file-list":!1,"on-success":e.afterUpload}},[e.model.icon?r("img",{staticClass:"avatar",attrs:{src:e.model.icon}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"称号"}},[r("el-input",{model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),r("el-form-item",{attrs:{label:"类型"}},[r("el-select",{attrs:{multiple:""},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return r("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"难度"}},[r("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{"show-score":"",max:3},model:{value:e.model.scores.difficult,callback:function(t){e.$set(e.model.scores,"difficult",t)},expression:"model.scores.difficult"}})],1),r("el-form-item",{attrs:{label:"攻击"}},[r("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{"show-score":"",max:3},model:{value:e.model.scores.attack,callback:function(t){e.$set(e.model.scores,"attack",t)},expression:"model.scores.attack"}})],1),r("el-form-item",{attrs:{label:"技能"}},[r("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{"show-score":"",max:3},model:{value:e.model.scores.skills,callback:function(t){e.$set(e.model.scores,"skills",t)},expression:"model.scores.skills"}})],1),r("el-form-item",{attrs:{label:"生存"}},[r("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{"show-score":"",max:3},model:{value:e.model.scores.survive,callback:function(t){e.$set(e.model.scores,"survive",t)},expression:"model.scores.survive"}})],1),r("el-form-item",{attrs:{label:"顺风出装"}},[r("el-select",{attrs:{multiple:""},model:{value:e.model.items_adv,callback:function(t){e.$set(e.model,"items_adv",t)},expression:"model.items_adv"}},e._l(e.items,(function(e){return r("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"逆风出装"}},[r("el-select",{attrs:{multiple:""},model:{value:e.model.items_dis,callback:function(t){e.$set(e.model,"items_dis",t)},expression:"model.items_dis"}},e._l(e.items,(function(e){return r("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"使用技巧"}},[r("el-input",{attrs:{resize:"none",type:"textarea",autosize:{minRows:2}},model:{value:e.model.usageTips,callback:function(t){e.$set(e.model,"usageTips",t)},expression:"model.usageTips"}})],1),r("el-form-item",{attrs:{label:"对抗技巧"}},[r("el-input",{attrs:{resize:"none",type:"textarea",autosize:{minRows:2}},model:{value:e.model.battleTips,callback:function(t){e.$set(e.model,"battleTips",t)},expression:"model.battleTips"}})],1),r("el-form-item",{attrs:{label:"团战技巧"}},[r("el-input",{attrs:{resize:"none",type:"textarea",autosize:{minRows:2}},model:{value:e.model.teamTips,callback:function(t){e.$set(e.model,"teamTips",t)},expression:"model.teamTips"}})],1)],1),r("el-tab-pane",{attrs:{label:"技能信息",name:"skills"}},[r("el-button",{on:{click:function(t){return e.model.skills.push({})}}},[r("i",{staticClass:"el-icon-plus"}),e._v(" 添加技能")]),e._l(e.model.skills,(function(t,n){return r("el-row",{key:n,staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},[r("el-col",{attrs:{md:12}},[r("el-form-item",{attrs:{label:"技能名称"}},[r("el-input",{model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"item.name"}})],1),r("el-form-item",{attrs:{label:"技能消耗"}},[r("el-input",{model:{value:t.cost,callback:function(r){e.$set(t,"cost",r)},expression:"item.cost"}})],1),r("el-form-item",{attrs:{label:"技能冷却"}},[r("el-input",{model:{value:t.cooldown,callback:function(r){e.$set(t,"cooldown",r)},expression:"item.cooldown"}})],1),r("el-form-item",{attrs:{label:"技能描述"}},[r("el-input",{attrs:{autosize:{minRows:2},type:"textarea",resize:"none"},model:{value:t.description,callback:function(r){e.$set(t,"description",r)},expression:"item.description"}})],1),r("el-form-item",{attrs:{label:"技能提示"}},[r("el-input",{model:{value:t.tips,callback:function(r){e.$set(t,"tips",r)},expression:"item.tips"}})],1)],1),r("el-col",{attrs:{md:12}},[r("el-form-item",{staticClass:"upload partner",attrs:{label:"图标"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.getAuthHeaders(),action:e.uploadURL,"show-file-list":!1,"on-success":function(r){return e.$set(t,"icon",r.url)}}},[t.icon?r("img",{staticClass:"avatar",attrs:{src:t.icon}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",[r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.model.skills.splice(n,1)}}},[e._v("删除")])],1)],1),r("div",{staticClass:"hr"})],1)}))],2),r("el-tab-pane",{attrs:{label:"最佳搭档",name:"partner"}},[r("el-button",{staticClass:"mb-2",on:{click:function(t){return e.model.partner.push({})}}},[r("i",{staticClass:"el-icon-plus"}),e._v(" 添加搭档")]),e._l(e.model.partner,(function(t,n){return r("el-row",{key:"partner"+n,staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},[r("el-col",{attrs:{md:12}},[r("el-form-item",{attrs:{label:"英雄"}},[r("el-select",{attrs:{filterable:""},model:{value:t.hero,callback:function(r){e.$set(t,"hero",r)},expression:"item.hero"}},e._l(e.heroes,(function(e){return r("el-option",{key:e._id,attrs:{label:e.title,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"搭档描述"}},[r("el-input",{attrs:{autosize:{minRows:2},type:"textarea",resize:"none"},model:{value:t.description,callback:function(r){e.$set(t,"description",r)},expression:"item.description"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.model.partner.splice(n,1)}}},[e._v("删除")])],1)],1)],1)}))],2)],1),r("el-form-item",{staticStyle:{"margin-top":"1rem"}},[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("提交")])],1)],1)],1)},s=[],a=r(6198),l=(r(5666),r(4045)),i=r(392),o=r(5274),c={props:{id:{type:String}},data:function(){return{model:{scores:{difficult:0,skills:0,attack:0,survive:0},skills:[]},categories:{},items:{},heroes:{}}},methods:{save:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.id){t.next=5;break}return t.next=3,(0,l.s9)(e.id,e.model);case 3:t.next=7;break;case 5:return t.next=7,(0,l.Om)(e.model);case 7:e.$router.push("/heroes/list"),e.$message({type:"success",message:"保存成功"});case 9:case"end":return t.stop()}}),t)})))()},fetch:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,l.a$)(e.id);case 2:r=t.sent,n=r.data,e.model=Object.assign({},e.model,n);case 5:case"end":return t.stop()}}),t)})))()},afterUpload:function(e){this.$set(this.model,"icon",e.url)},fetchCategoires:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.AT)();case 2:r=t.sent,n=r.data,e.categories=n;case 5:case"end":return t.stop()}}),t)})))()},fetchItems:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,o.mC)();case 2:r=t.sent,n=r.data,e.items=n;case 5:case"end":return t.stop()}}),t)})))()},initHeroesList:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,l.$c)();case 2:r=t.sent,n=r.data,e.heroes=n;case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchCategoires(),this.fetchItems(),this.initHeroesList(),this.id&&this.fetch()}},u=c,m=r(1001),d=(0,m.Z)(u,n,s,!1,null,"00618d59",null),p=d.exports},392:function(e,t,r){r.d(t,{AT:function(){return s},OU:function(){return o},Om:function(){return a},a$:function(){return i},k4:function(){return c},s9:function(){return l}});var n=r(6051),s=function(){return n.A.get("categories")},a=function(e){return n.A.post("categories",e)},l=function(){return n.A.put("categories/".concat(arguments.length<=0?void 0:arguments[0]),arguments.length<=1?void 0:arguments[1])},i=function(e){return n.A.get("categories/".concat(e))},o=function(){return n.A.get("categories")},c=function(e){return n.A.post("categories/".concat(e))}},4045:function(e,t,r){r.d(t,{$c:function(){return s},Om:function(){return a},a$:function(){return i},k4:function(){return o},s9:function(){return l}});var n=r(6051),s=function(){return n.A.get("heroes")},a=function(e){return n.A.post("heroes",e)},l=function(){return n.A.put("heroes/".concat(arguments.length<=0?void 0:arguments[0]),arguments.length<=1?void 0:arguments[1])},i=function(e){return n.A.get("heroes/".concat(e))},o=function(e){return n.A.post("heroes/".concat(e))}},5274:function(e,t,r){r.d(t,{Om:function(){return a},a$:function(){return i},k4:function(){return o},mC:function(){return s},s9:function(){return l}});var n=r(6051),s=function(){return n.A.get("items")},a=function(e){return n.A.post("items",e)},l=function(){return n.A.put("items/".concat(arguments.length<=0?void 0:arguments[0]),arguments.length<=1?void 0:arguments[1])},i=function(e){return n.A.get("items/".concat(e))},o=function(e){return n.A.post("items/".concat(e))}}}]);
//# sourceMappingURL=108-legacy.b9a84106.js.map